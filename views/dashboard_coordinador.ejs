<%- include('includes/_nav_coordinador.ejs') %>
  <%- include('includes/_header_coordinador.ejs') %>

    <main class="bg-grey flex-grow-1 rounded-5 p-0 d-flex flex-column" style="height: 100vh;">
      <div class="mb-4">
        <h1 class="ms-3 mt-2">Dashboard</h1>
        <div style="border-bottom: 3px solid #84251C; width: 15rem; margin-top: -10px;"></div>

        <% if (msg) { %>
          <div class="modal fade" id="msgModal" tabindex="-1" aria-labelledby="msgModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-md">
              <div class="modal-content align-items-center rounded-5 px-5">
                <div class="modal-header border border-0">
                  <h5 class="modal-title ivd-text-red" id="msgModalLabel">Sincronizar Ciclo Escolar</h5>
                </div>
                <div class="modal-body bg-grey rounded-5 text-center">
                  <%- msg %>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn ivd-bg-red text-white rounded-5"
                    data-bs-dismiss="modal">Aceptar</button>
                </div>
              </div>
            </div>
          </div>
          <% } %>



            <div class="d-grid gap-2 d-md-flex justify-content-md-end position-relative" style="margin-top: -40px;">
              <form action="/coordinador/ciclo-escolar/sincronizar" method="POST">
                <button
                  class="btn rounded-pill px-3 py-2 ivd-bg-red text-white d-flex align-items-center justify-content-end me-3 mt-2"
                  type="submit" style="min-width: fit-content;">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-arrow-clockwise me-1" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z" />
                    <path
                      d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466" />
                  </svg>
                  <span class="text-nowrap">Sincronizar Ciclo Escolar</span>
                </button>
              </form>
            </div>


            <div class="d-flex flex-wrap justify-content-between w-100 mt-4 gap-4 px-4">
              <div class="card rounded-5 ivd-bg-red bg-gradient text-white flex-grow-1"
                style="min-width: 177px; max-width: 280px; flex-basis: 17.5%;">
                <div class="card-body px-0 text-start w-100" style="margin-top: -5px;">
                  <div class="d-flex align-items-center justify-content-between">
                    <p class="card-title ms-3">Materias Abiertas</p>
                    <button class="ratio ratio-1x1 rounded-circle overflow-hidden me-2" type="button"
                      onclick="window.location.href='/coordinador/grupos';"
                      style="width: 20px; height: 20px; margin-top: -10px;">
                      <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="black"
                        class="bi bi-arrow-up-right bi-arrow-up-right-sm" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                          d="M14 2.5a.5.5 0 00-.5-.5h-6a.5.5 0 0 0 0 1h4.793L2.146 13.146a.5.5 0 0 0 .708.708L13 3.707V8.5a.5.5 0 0 0 1 0z" />
                      </svg>
                    </button>
                  </div>
                  <div style="border-bottom: 3px solid #ffffff; min-width: 100%; margin-top: -7px;"></div>
                  <p class="card-text text-start ms-4" style="margin-top: 10px; font-size: 2rem;"> 40 </p>
                </div>
              </div>

              <div class="card rounded-5 ivd-bg-white bg-gradient text-black flex-grow-1"
                style="min-width: 177px; max-width: 280px; flex-basis: 17.5%;">
                <div class="card-body px-0 text-start w-100" style="margin-top: -5px;">
                  <div class="d-flex align-items-center justify-content-between">
                    <p class="card-title ms-3">Grupos Abiertos</p>
                    <button class="ratio ratio-1x1 rounded-circle overflow-hidden me-2" type="button"
                      onclick="window.location.href='/coordinador/grupos';"
                      style="width: 20px; height: 20px; margin-top: -10px;">
                      <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="black"
                        class="bi bi-arrow-up-right bi-arrow-up-right-sm  " viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                          d="M14 2.5a.5.5 0 00-.5-.5h-6a.5.5 0 0 0 0 1h4.793L2.146 13.146a.5.5 0 0 0 .708.708L13 3.707V8.5a.5.5 0 0 0 1 0z" />
                      </svg>
                    </button>
                  </div>
                  <div style="border-bottom: 3px solid #84251c98; width: 100%; margin-top: -7px;"></div>
                  <p class="card-text text-start ms-4" style="margin-top: 10px; font-size: 2rem;">36</p>
                </div>
              </div>


              <div class="card rounded-5 ivd-bg-white bg-gradient text-black flex-grow-1"
                style="min-width: 177px; max-width: 280px; flex-basis: 17.5%;">
                <div class="card-body px-0 text-start w-100" style="margin-top: -5px;">
                  <div class="d-flex align-items-center justify-content-between">
                    <p class="card-title ms-3">Alumnos Inscritos</p>
                    <button class="ratio ratio-1x1 rounded-circle overflow-hidden me-2" type="button"
                      onclick="window.location.href='/coordinador/alumnos';"
                      style="width: 20px; height: 20px; margin-top: -10px;">
                      <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="black"
                        class="bi bi-arrow-up-right bi-arrow-up-right-sm  " viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                          d="M14 2.5a.5.5 0 00-.5-.5h-6a.5.5 0 0 0 0 1h4.793L2.146 13.146a.5.5 0 0 0 .708.708L13 3.707V8.5a.5.5 0 0 0 1 0z" />
                      </svg>
                    </button>
                  </div>
                  <div style="border-bottom: 3px solid #84251c98; width: 100%; margin-top: -7px;"></div>
                  <p class="card-text text-start ms-4" style="margin-top: 10px; font-size: 2rem;"><%= alumnosInscritos %></p>
                </div>
              </div>

              <div class="card rounded-5 ivd-bg-white bg-gradient text-black flex-grow-1"
                style="min-width: 177px; max-width: 280px; flex-basis: 17.5%;">
                <div class="card-body px-0 text-start w-100" style="margin-top: -5px;">
                  <div class="d-flex align-items-center justify-content-between">
                    <p class="card-title ms-3">Alumnos No Inscritos</p>
                    <button class="ratio ratio-1x1 rounded-circle overflow-hidden me-2" type="button"
                      onclick="window.location.href='/coordinador/alumnos';"
                      style="width: 20px; height: 20px; margin-top: -10px;">
                      <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="black"
                        class="bi bi-arrow-up-right bi-arrow-up-right-sm  " viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                          d="M14 2.5a.5.5 0 00-.5-.5h-6a.5.5 0 0 0 0 1h4.793L2.146 13.146a.5.5 0 0 0 .708.708L13 3.707V8.5a.5.5 0 0 0 1 0z" />
                      </svg>
                    </button>
                  </div>
                  <div style="border-bottom: 3px solid #84251c98; width: 100%; margin-top: -7px;"></div>
                  <p class="card-text text-start ms-4" style="margin-top: 10px; font-size: 2rem;"> <%= alumnosNoInscritos %></p>
                </div>
              </div>

              <div class="card rounded-5 ivd-bg-white bg-gradient text-black flex-grow-1"
                style="min-width: 177px; max-width: 280px; flex-basis: 17.5%;">
                <div class="card-body px-0 text-start w-100" style="margin-top: -5px;">
                  <div class="d-flex align-items-center justify-content-between">
                    <p class="card-title ms-3">Profesor</p>

                    <button class="ratio ratio-1x1 rounded-circle overflow-hidden me-2" type="button"
                      onclick="window.location.href='/coordinador/alumnos';"
                      style="width: 20px; height: 20px; margin-top: -10px;">
                      <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="black"
                        class="bi bi-arrow-up-right bi-arrow-up-right-sm  " viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                          d="M14 2.5a.5.5 0 00-.5-.5h-6a.5.5 0 0 0 0 1h4.793L2.146 13.146a.5.5 0 0 0 .708.708L13 3.707V8.5a.5.5 0 0 0 1 0z" />
                      </svg>
                    </button>
                  </div>
                  <div style="border-bottom: 3px solid #84251c98; width: 100%; margin-top: -7px;"></div>
                  <p class="card-text text-start ms-4" style="margin-top: 10px; font-size: 2rem;">
                    <%= profesoresTotales %>
                  </p>
                </div>
              </div>

            </div>

            <div class="d-flex flex-wrap justify-content-between w-100 mt-4 px-4">
              <div class="card rounded-5 ivd-bg-white bg-gradient text-black d-flex flex-column col-lg-4"
                style="max-width: 37.5%; flex-grow: 1;">
                <div class="card-header bg-transparent border-0 px-3 pt-3 pb-0">

                  <div class="d-flex align-items-center justify-content-between">
                    <p class="card-title m-0">Grupos</p>

                    <button class="ratio ratio-1x1 rounded-circle overflow-hidden me-2" type="button"
                      onclick="window.location.href='/coordinador/grupos';"
                      style="width: 20px; height: 20px; margin-top: -1px;">
                      <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="black"
                        class="bi bi-arrow-up-right bi-arrow-up-right-sm  " viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                          d="M14 2.5a.5.5 0 00-.5-.5h-6a.5.5 0 0 0 0 1h4.793L2.146 13.146a.5.5 0 0 0 .708.708L13 3.707V8.5a.5.5 0 0 0 1 0z" />
                      </svg>
                    </button>
                  </div>
                  <div class="border-bottom border-3 mt-2" style="border-color: #84251c98 !important;"></div>
                </div>

                <div class="card-body p-0 overflow-auto" style="max-height: 150px;">
                  <div class="px-3 pt-2">
                    <div class="table-responsive">
                      <table class="table table-sm">
                        <tbody>
                          <tr>
                            <td>Grupo 1</td>
                            <td>20 alumnos</td>
                          </tr>
                          <tr>
                            <td>Grupo 2</td>
                            <td>18 alumnos</td>
                          </tr>
                          <tr>
                            <td>Grupo 3</td>
                            <td>22 alumnos</td>
                          </tr>
                          <tr>
                            <td>Grupo 4</td>
                            <td>15 alumnos</td>
                          </tr>
                          <tr>
                            <td>Grupo 5</td>
                            <td>25 alumnos</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

                <div class="card-footer bg-transparent border-0 py-2 px-3">
                  <small class="text-muted">Total: 36 grupos</small>
                </div>
              </div>



              <div class="card rounded-5 ivd-bg-white bg-gradient text-black d-flex flex-column"
                style="max-width: 18%; flex-grow: 1;">
                <div class="card-header bg-transparent border-0 p-0">
                  <div class="px-3 pt-3">
                    <div class="d-flex align-items-center justify-content-between">
                      <p class="card-title m-0">Salones Asignados</p>
                      <button class="ratio ratio-1x1 rounded-circle overflow-hidden me-2" type="button"
                        onclick="window.location.href='/coordinador/salones';"
                        style="width: 20px; height: 20px; margin-top: -1px;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="black" viewBox="0 0 16 16">
                          <path fill-rule="evenodd"
                            d="M14 2.5a.5.5 0 00-.5-.5h-6a.5.5 0 0 0 0 1h4.793L2.146 13.146a.5.5 0 0 0 .708.708L13 3.707V8.5a.5.5 0 0 0 1 0z" />
                        </svg>
                      </button>
                    </div>
                  </div>
                  <div class="border-bottom border-3 mt-2 w-100" style="border-color: #84251c98 !important;"></div>
                </div>
                <div class="card-body p-0 overflow-auto" style="max-height: 150px;">
                  <div class="px-3 pt-2">
                    <div class="table-responsive">
                      <table class="table table-sm">
                        <tbody>
                          
                          <tr>
                            <td>Grupo 1</td>
                            <td>20 alumnos</td>
                          </tr>
                          <tr>
                            <td>Grupo 2</td>
                            <td>18 alumnos</td>
                          </tr>
                          <tr>
                            <td>Grupo 3</td>
                            <td>22 alumnos</td>
                          </tr>
                          <tr>
                            <td>Grupo 4</td>
                            <td>15 alumnos</td>
                          </tr>
                          <tr>
                            <td>Grupo 5</td>
                            <td>25 alumnos</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

                <div class="card-footer bg-transparent border-0 py-2 px-3">
                  <small class="text-muted">Total: <%= salon_Totales %> salones</small>
                </div>
              </div>

              <div class="card rounded-5 ivd-bg-white bg-gradient text-black d-flex flex-column col-lg-4"
                style="max-width: 37.5%; flex-grow: 1;">
                <div class="card-header bg-transparent border-0 px-3 pt-3 pb-0">

                  <div class="d-flex align-items-center justify-content-between">
                    <p class="card-title m-0">Solicitud de cambio de horario </p>

                    <button class="ratio ratio-1x1 rounded-circle overflow-hidden" type="button"
                      onclick="window.location.href='/coordinador/solicitudes-cambio';"
                      style="width: 20px; height: 20px; margin-top: -1px;">
                      <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="black"
                        class="bi bi-arrow-up-right bi-arrow-up-right-sm  " viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                          d="M14 2.5a.5.5 0 00-.5-.5h-6a.5.5 0 0 0 0 1h4.793L2.146 13.146a.5.5 0 0 0 .708.708L13 3.707V8.5a.5.5 0 0 0 1 0z" />
                      </svg>
                    </button>
                  </div>
                  <div class="border-bottom border-3 mt-2" style="border-color: #84251c98 !important;"></div>
                </div>

                <div class="card-body p-0 overflow-auto" style="max-height: 150px;">
                  <div class="px-3 pt-2">
                    <div class="table-responsive">
                      <table class="table table-sm">
                        <tbody>
                          <tr>
                            <td>Grupo 1</td>
                            <td>20 alumnos</td>
                          </tr>
                          <tr>
                            <td>Grupo 2</td>
                            <td>18 alumnos</td>
                          </tr>
                          <tr>
                            <td>Grupo 3</td>
                            <td>22 alumnos</td>
                          </tr>
                          <tr>
                            <td>Grupo 4</td>
                            <td>15 alumnos</td>
                          </tr>
                          <tr>
                            <td>Grupo 5</td>
                            <td>25 alumnos</td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

                <div class="card-footer bg-transparent border-0 py-2 px-3">
                  <small class="text-muted">Total: 36 grupos</small>
                </div>
              </div>

            </div>






    </main>
    </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/coordinador.js"></script>
    <script>
      // Automatically show modal when message exists
      document.addEventListener('DOMContentLoaded', function () {
        const msgModal = document.getElementById('msgModal');
        if (msgModal) {
          const modal = new bootstrap.Modal(msgModal);
          modal.show();

          // Optional: Clear URL query after showing modal
          history.replaceState(null, '', window.location.pathname);
        }
      });
    </script>
    </body>

    </html>